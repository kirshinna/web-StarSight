{% extends 'main/layout.html' %}

{% block title %}StarSight – Проверка условий для наблюдений{% endblock %}

{% block content %}
    <h1>StarSight</h1>
    <p>Проверка условий для наблюдения за звёздами и Луной</p>
    <form method="get">
        <input type="text" name="city" placeholder="Город" required>
        <p>
            <label>С даты:</label>
            <input type="date" name="start" required>

            <label>По дату:</label>
            <input type="date" name="end" required>
        </p>
        <button type="submit">Показать</button>
    </form>

    <p>{{ result }}</p>

    {% if heatmap_img %}
    <h3>Тепловая карта качества ночи</h3>
    <img src="data:image/png;base64,{{ heatmap_img }}" alt="Тепловая карта">
    {% endif %}

    {% if days %}
    <div class="accordion" id="accordionExample">
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                    Показать подробные данные ({{ days|length }} дней)
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse">
                <div class="accordion-body">
                    <ul class="list-unstyled">
                        {% for day in days %}
                            <li class="mb-2">
                                <strong>{{ day.datetime }}</strong> —
                                облачность: {{ day.cloudcover }}%,
                                фаза Луны: {{ day.moonphase }},
                                видимость: {{ day.visibility }}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

{% endblock %}